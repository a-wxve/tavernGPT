body.bubblechat {
    .mes[is_user="true"] .mes_block {
        padding-right: 0;

        .mes_text {
            border-radius: var(--borderRadius);
        }
    }
}

body.hideChatAvatars .mesAvatarWrapper {
    display: none;
}

body.waifuMode .expression-holder {
    left: 0;
}

#sheld {
    border-radius: 0;
    height: 100dvh;
    margin: 0;
    max-width: 100dvw !important;
}

#sheld #chat_header {
    z-index: 100;
    justify-content: center;
    width: 100%;
    padding: 10px;
    position: absolute;
    top: 0;
    left: 0;
    backdrop-filter: blur(9px);
}

#sheld #chat_header .avatar {
    flex: 0;
    align-self: center;
}

#sheld #chat_header .ch_name {
    flex-direction: column;
    align-items: baseline;
}

#sheld #chat_header .ch_name .mes_buttons {
    display: none !important;
}

#sheld #chat_header .mes_timer,
#sheld #chat_header .mesIDDisplay,
#sheld #chat_header .tokenCounterDisplay {
    cursor: default;
    opacity: 0.7;
    font-size: calc(var(--mainFontSize) * 0.69);
    text-align: center;
    font-weight: 600;
}

#sheld #chat {
    padding-top: 6rem;
}

#sheld #form_sheld #send_form #leftSendForm,
#sheld #form_sheld #send_form #rightSendForm {
    align-self: center;
}

.mes {
    margin-bottom: 0 !important;
    padding-top: 0 !important;
}

#sheld #chat .mes.last_mes {
    padding-bottom: 5rem !important;
}

.mes .mes_block .ch_name.flex-container.justifySpaceBetween {
    justify-content: end;
}

#chat
    > div.mes
    > div.mes_block
    > div.ch_name.flex-container.justifySpaceBetween
    > div
    > div {
    display: none;
}

#form_sheld {
    padding-bottom: 2rem;
    right: 0px;
}

#top-settings-holder {
    padding: 0.75rem 0.25rem;
    width: 66% !important;
}

#top-settings-holder:not(.collapsed) ~ #sheld {
    filter: brightness(50%);
}

#top-settings-holder.collapsed #ai-config-button,
#top-settings-holder.collapsed #sys-settings-button,
#top-settings-holder.collapsed #advanced-formatting-button,
#top-settings-holder.collapsed #WI-SP-button,
#top-settings-holder.collapsed #logo_block,
#top-settings-holder.collapsed #extensions-settings-button,
#top-settings-holder.collapsed #persona-management-button,
#top-settings-holder.collapsed #user-settings-button,
#top-settings-holder.collapsed #rightNavHolder,
#top-settings-holder.collapsed .historyButton,
#top-settings-holder.collapsed #select_chat_div,
#top-settings-holder.collapsed #select_chat_search,
#top-settings-holder.collapsed #explore-button {
    display: none !important;
}

.drawer-content,
#explore-button .drawer-content,
#left-nav-panel,
#right-nav-panel,
#character_popup {
    z-index: 3000;
    border-radius: 0;
    height: 100dvh;
    margin: 0;
    overflow-x: hidden;
    min-width: calc(100dvw - 3.06rem) !important;
    max-width: calc(100dvw - 3.06rem) !important;
    top: 0 !important;
    left: 3rem !important;
}

#character_popup {
    z-index: 3005;
}

#sys-settings-button,
#advanced-formatting-button,
#WI-SP-button,
#logo_block,
#extensions-settings-button,
#user-settings-button {
    padding-left: 0 !important;
    display: flex !important;
}

#ai-config-button > .inline-drawer-icon {
    display: none;
}

#persona-management-button {
    position: absolute !important;
    bottom: 0.5rem;
    left: 0.25rem;
}

.character-list-item {
    flex-flow: column;
}

#splash {
    left: 45px;
}
